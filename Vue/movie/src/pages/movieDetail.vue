<!-- ä¸€ä¸ªå‘ï¼Œ:movie_id="detail[0]._id" -->
<template lang="html">
<div class="container">
	<div>
		<movie-index-header></movie-index-header>
	</div>

	<div class="contentMain">
        <div class="movie-info">

                <div class="movie-info-right">
                    <h1>{{detail[0].movieName}}</h1>
                    é£æ ¼ï¼šå‰§æƒ…/æ‚¬ç–‘/å¥‡å¹»<br>
                    åœ°åŒºï¼šç¾å›½/è‹±å›½<br>
                    ä¸Šæ˜ æ—¶é—´ï¼š2011-08-04<br>
                    å‡ºæ¼”ï¼šä¸¹å°¼å°”Â·é›·å¾·å…‹é‡Œå¤« è‰¾ç›Â·æ²ƒæ£® é²ä¼¯ç‰¹Â·æ ¼æ—ç‰¹ æµ·ä¼¦å¨œÂ·ä¼¯ç¿°Â·å¡ç‰¹ æ‹‰å°”å¤«Â·è´¹å› æ–¯ è‰¾ä¼¦Â·ç‘å…‹æ›¼ ç›å‰Â·å²å¯†æ–¯ æ±¤å§†Â·è´¹å°”é¡¿ é‚¦å¦®Â·æ€€ç‰¹ æœ±ä¸½Â·æ²ƒç‰¹æ–¯ è¿ˆå…‹å°”Â·åˆšæœ¬ ä¼Šæ–‡å¨œÂ·æ—å¥‡ å¤šå§†çº³å°”Â·æ ¼é‡Œæ£® å…‹è•¾æ›¼ä¸Â·æ³¢è¥¿ è©¹æ£®Â·è‰¾è¨å…‹ æµ·ä¼¦Â·éº¦å…‹æ´›ç‘ é©¬ä¿®Â·åˆ˜æ˜“æ–¯ æ¢ä½©è¯— çº¦ç¿°Â·èµ«ç‰¹ å¤§å«Â·ä¼‘é‡Œæ–¯ åŠ é‡ŒÂ·å¥¥å¾·æ›¼ å‰å§†Â·å¸ƒåŠ³å¾·æœ¬ç‰¹ è‰¾ç›Â·æ±¤æ™®æ£® å¨œå¡”ä¸½Â·ç‰¹çº³ è’‚è«è¥¿Â·æ–¯æ³¢ å¤§å«Â·å¸ƒæ‹‰å¾·åˆ© ç½—å½¼Â·è€ƒç‰¹æ‹‰å°¼ å‡¯è‰Â·éº¦å…‹å”çº³ å¡ä¼¦Â·å¸Œå¾·<br>
                    ç®€ä»‹ï¼šå½“åˆä¸€æ¬¡å’Œä¼åœ°é­”ï¼ˆæ‹‰å°”å¤«Â·è´¹å› æ–¯ Ralph Fiennes é¥°ï¼‰çš„æ„è¯†è¿é€šï¼Œå“ˆåˆ©Â·æ³¢ç‰¹ï¼ˆä¸¹å°¼å°”Â·é›·å¾·å…‹é‡Œå¤« Daniel Radcliffe é¥°ï¼‰æ–­å®šæœ€åä¸€ä»¶é­‚å™¨è—åœ¨éœæ ¼æ²ƒèŒ¨ï¼Œäºæ˜¯å’Œç½—æ©ï¼ˆé²ä¼¯ç‰¹Â·æ ¼æ—ç‰¹ Rupert Grint é¥°ï¼‰ã€èµ«æ•ï¼ˆè‰¾ç›Â·æ²ƒæ£® Emma Watson é¥°ï¼‰ä¸€åŒè¿”å›é˜´äº‘å¯†å¸ƒçš„å­¦æ ¡ã€‚åœ¨å¥½å‹ä»¬çš„å¸®åŠ©ä¸‹ï¼Œä»–ä»¬æˆ...    
                </div>
                <div class="movie-info-left">
                        <img class="headerImg" :src="detail[0].movieImg">
                </div>
        </div>
        <div class="movie-tools">
            <div class="btnPosition">
                <button v-on:click="movieDownload()" class="btn"><a>ç‚¹å‡»ä¸‹è½½</a></button>
            </div>
            <div v-on:click="support()" class="btnPosition2">
                <h2 style="margin:16px 20px">
                    ğŸ‘<a>ç‚¹èµ</a>
                </h2>
            </div>
            <h2 class="viewNum">
                ä¸‹è½½æ¬¡æ•°ï¼š<span class="middle-font-size">{{detail[0].movieNumDownload}}</span>&nbsp&nbsp
                ç‚¹èµæ•°ä¸ºï¼š<span class="middle-font-size">{{detail[0].movieNumSuppose}}</span>
            </h2>
             <el-divider></el-divider>
            <div class="commentMain">
                <div class="comment">
                    ç½‘å‹è¯„è®ºï¼š
                    <br>
                    <br>
                    <comment :movie_id="detail[0]._id"></comment>
                </div>
            </div>
            
               

        </div>

                
    </div>



<!-- 		<div>
			<common-footer></common-footer>
		</div> -->
</div>

</template>

<script type="text/javascript">
	import axios from 'axios'
	import MovieIndexHeader from '../components/MovieIndexHeader'
	import CommonFooter from '../components/CommonFooter'
	import Comment from '../components/Comment'

	export default {
		name:'MovieDetail',
		data(){
			return{
				detail:[],

			}
		},
		components:{
			MovieIndexHeader,
			CommonFooter,
			Comment
		},
		created(){
			//åˆå§‹åŒ–å,å°†è·¯ç”±ä¼ è¿‡æ¥çš„ç”µå½±idå°è£…èµ·æ¥ï¼Œç”¨æ¥è·å–æ­¤ç”µå½±å†…å®¹
			this.movie_id=this.$route.query.id
			let movie_id=this.$route.query.id
			axios.post('/movie/detail',{movie_id:this.movie_id}).then((data)=>{
            //å·¦è¾¹çš„movie_idæ˜¯requestå‚æ•°ï¼Œå³è¾¹çš„ä¸ºæœ¬ç»„ä»¶çš„æ•°æ®æº
				this.detail=data.data.data;
                console.log(this.detail)
			})

		},
		methods:{
			//ç‚¹èµ
			support:function(event){
				this.axios.post('/users/support',{movie_id:this.movie_id})
				.then((data1)=>{
					let data_temp=data1.data
					let that=this

					if(data_temp.status===0){ //å³ç‚¹èµè¯·æ±‚æˆåŠŸäº†
                        //åœ¨å•å‡»ç‚¹èµæŒ‰é’®ä¸”è¯·æ±‚æˆåŠŸåå°†åŸæœ¬çš„ç‚¹èµæ•°æ®+1
						this.axios.post('/movie/showNumber',{movie_id:this.movie_id})
						.then((data2)=>{
							that.detail[0].movieNumSuppose=data2.data.data

						}) 
					}else{
						alert(data_temp.message)
					}
				})
			},
			//ç”µå½±ä¸‹è½½
			movieDownload:function(event){
			axios.post('/users/download', {
			    movie_id: this.movie_id  
			  })
			  .then((res)=>{

			    if(res.status==1){
			    	alert(res.message)
			    }else{
                    alert('ä¸‹è½½åœ°å€ï¼š'+res.data.data)
                    // axios.post('http://localhost:3000/movie/showDownloadNumber',{movie_id:this.movie_id})
                    //     .then((data3)=>{
                    //         console.log(data3.body.data)
                    //         that.detail[0].movieNumDownload=data3.body.data
                    //     })

			    	//è·³è½¬è‡³ä¸‹è½½é“¾æ¥
			    	// window.location = response.data;
			    }
			  })
			  .catch(function (error) {
			    console.log(error);
			  });
			}
		},
	}
</script>

<style type="text/css" scoped>
.commentMain{
    min-height: 500px;
}
.movie-info{
    width: 1160px;
    height: 200px;
    margin:0 auto;

}

.movie-info-left{
    float: left;
}
.movie-info-right{
    float: right;
    margin-left: -135px;
    width: 1160px;

    padding-left: 150px;
}
.movie-tools{
    width: 1160px;
    height: 200px;
    margin:15px auto;

}
.headerImg{
    float: left;
    width: 135px;
    height: 200px;
    border-radius: 6px;
}
h1{
    font-size: 35px;
}
h2{
    font-size: 18px;
}
.middle-font-size{
    font-size: 35px;
}
.btnPosition{
    float: right;
    margin-top: 12px;
}
.btnPosition2{
    float: right;
}
.contentMain{
	min-height: 600px;
    margin-top: 20px;
    margin-left: 20px;
}
.btn{
    margin:16   px 20px;
    color: rgb(127, 187, 255);

    display: inline-block;

    padding: 6px 12px;
    margin-bottom: 0;
    font-size: 14px;
    font-weight: 400;
    line-height: 1.42857143;
    text-align: center;
    white-space: nowrap;
    vertical-align: middle;
    touch-action: manipulation;
    cursor: pointer;
    user-select: none;
    background-image: none;
    border: 1px solid grow;
    border-radius: 4px;
    outline: none;
}
  .btn:hover{
    background-color: #e6e6e6;
    /*é‡è¦ï¼Œé¼ æ ‡ç§»ä¸Šå»å˜ç°è‰²*/
    border-color: #adadad;
  }
  .btn:active{
   -webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, .125);
          box-shadow: inset 0 3px 5px rgba(0, 0, 0, .125); 
    /*é‡è¦ï¼Œç‚¹å‡»åäº§ç”Ÿå‡¹é™·é˜´å½±  */
  }
  .el-divider--horizontal{
    margin:5px 0 20px 0;
  }
</style>